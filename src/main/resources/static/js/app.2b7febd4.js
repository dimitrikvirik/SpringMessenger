(function(e){function t(t){for(var a,i,o=t[0],u=t[1],c=t[2],m=0,d=[];m<o.length;m++)i=o[m],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,o=1;o<s.length;o++){var u=s[o];0!==n[u]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=s[0]))}return e}var a={},n={app:0},r=[];function i(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=a,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";s("85ec")},"06c7":function(e,t,s){},1182:function(e,t,s){"use strict";s("ddf8")},"175d":function(e,t,s){"use strict";s("06c7")},"1cba":function(e,t,s){},"32c6":function(e,t,s){"use strict";s("32f5")},"32f5":function(e,t,s){},"3f31":function(e,t,s){"use strict";s("1cba")},4585:function(e,t,s){"use strict";s("b166")},"55c6":function(e,t,s){"use strict";s("6f2a")},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d"),s("d3b7");var a=s("2b0e"),n=s("bc3a"),r=s.n(n),i={},o=r.a.create(i);o.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=o,window.axios=o,Object.defineProperties(e.prototype,{axios:{get:function(){return o}},$axios:{get:function(){return o}}})},a["a"].use(Plugin);Plugin;var u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},c=[],l=s("4d5c"),m=s.n(l),d={title:"foo",mounted:function(){m.a.AutoInit(void 0)}},f=d,g=(s("034f"),s("2877")),v=Object(g["a"])(f,u,c,!1,null,null,null),p=v.exports,h=s("8c4f"),w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.pageLoaded?s("div",[e.islogged?s("Chat"):s("Login")],1):s("div")])},_=[],b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[e.dologin?s("div",{attrs:{id:"login"}},[s("div",{staticClass:"row"},[s("form",{staticClass:"col s12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userForm.username,expression:"userForm.username"}],staticClass:"validate",class:e.usernameError,attrs:{id:"login_username",type:"text"},domProps:{value:e.userForm.username},on:{input:function(t){t.target.composing||e.$set(e.userForm,"username",t.target.value)}}}),s("label",{attrs:{for:"login_username"}},[e._v("Username")]),s("span",{staticClass:"helper-text",attrs:{"data-error":e.usernameErrorMsg}})])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userForm.password,expression:"userForm.password"}],staticClass:"validate",attrs:{id:"login_password",type:"password"},domProps:{value:e.userForm.password},on:{input:function(t){t.target.composing||e.$set(e.userForm,"password",t.target.value)}}}),s("label",{attrs:{for:"login_password"}},[e._v("Password")])])]),s("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"button",name:"action"},on:{click:e.login}},[e._v("Login "),s("i",{staticClass:"material-icons right"},[e._v("send")])]),s("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"button",name:"action"},on:{click:e.show_reg}},[e._v("Registration "),s("i",{staticClass:"material-icons right"},[e._v("send")])])])])]):e._e(),e.doreg?s("div",{attrs:{id:"reg"}},[s("div",{staticClass:"row"},[s("form",{staticClass:"col s12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.regForm.username,expression:"regForm.username"}],staticClass:"validate",class:e.usernameError,attrs:{id:"reg_username",type:"text"},domProps:{value:e.regForm.username},on:{input:function(t){t.target.composing||e.$set(e.regForm,"username",t.target.value)}}}),s("label",{attrs:{for:"reg_username"}},[e._v("Username")]),s("span",{staticClass:"helper-text",attrs:{"data-error":e.usernameErrorMsg}})])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.regForm.firstname,expression:"regForm.firstname"}],staticClass:"validate",attrs:{id:"reg_firstname",type:"text"},domProps:{value:e.regForm.firstname},on:{input:function(t){t.target.composing||e.$set(e.regForm,"firstname",t.target.value)}}}),s("label",{attrs:{for:"reg_firstname"}},[e._v("Firstname")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.regForm.lastname,expression:"regForm.lastname"}],staticClass:"validate",attrs:{id:"reg_lastname",type:"text"},domProps:{value:e.regForm.lastname},on:{input:function(t){t.target.composing||e.$set(e.regForm,"lastname",t.target.value)}}}),s("label",{attrs:{for:"reg_lastname"}},[e._v("Lastname")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.regForm.password,expression:"regForm.password"}],staticClass:"validate",attrs:{id:"reg_password",type:"password"},domProps:{value:e.regForm.password},on:{input:function(t){t.target.composing||e.$set(e.regForm,"password",t.target.value)}}}),s("label",{attrs:{for:"reg_password"}},[e._v("Password")])])]),s("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"button",name:"action"},on:{click:e.reg}},[e._v("Registration "),s("i",{staticClass:"material-icons right"},[e._v("send")])]),s("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"button",name:"action"},on:{click:e.show_login}},[e._v("Login "),s("i",{staticClass:"material-icons right"},[e._v("send")])])])])]):e._e()])},C=[],x={name:"Home",data:function(){return{dologin:!0,doreg:!1,regForm:{firstname:"",lastname:"",username:"",password:""},userForm:{username:"",password:""},usernameError:"",usernameErrorMsg:""}},methods:{show_login:function(){this.dologin=!0,this.doreg=!1},show_reg:function(){this.dologin=!1,this.doreg=!0},login:function(){var e=this;e.usernameError="",r.a.post(this.$store.state.request_url+"user/login",{username:this.userForm.username,password:this.userForm.password}).then((function(e){200===e.status&&location.reload()})).catch((function(t){e.usernameError="invalid",e.usernameErrorMsg=t.response.data.message}))},reg:function(){var e=this;e.usernameError="",r.a.post(this.$store.state.request_url+"user/reg",{firstname:this.regForm.firstname,lastname:this.regForm.lastname,username:this.regForm.username,password:this.regForm.password}).then((function(e){200===e.status&&(window.location.href="/")})).catch((function(t){e.usernameError="invalid",e.usernameErrorMsg=t.response.data.message}))}}},I=x,y=(s("1182"),Object(g["a"])(I,b,C,!1,null,"2bba454c",null)),k=y.exports,F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("button",{staticClass:"btn waves-effect waves-light",attrs:{id:"btn-userinfo",type:"submit",name:"action"},on:{click:function(t){e.userInfoShow=!0}}},[e._v("User Info ")]),s("button",{staticClass:"btn waves-effect waves-light",attrs:{id:"btn-logout",type:"submit",name:"action"},on:{click:function(t){return e.logout()}}},[e._v("Logout "),s("i",{staticClass:"material-icons right"},[e._v("send")])]),s("MessengerForm",{attrs:{user:e.userInfo.username}}),e.userInfoShow?s("div",{attrs:{id:"user-infoBack"}},[s("div",{attrs:{id:"user-info"}},[s("a",{staticClass:"btn-floating btn-large waves-effect waves-light light-green-text",attrs:{id:"close-user-info"},on:{click:function(t){e.userInfoShow=!1,e.editUserBack()}}},[s("i",{staticClass:"material-icons"},[e._v("clear")])]),e.userInfoShow1?s("div",[s("ul",[s("li",[e._v("Username: "+e._s(e.userInfo.username))]),s("li",[e._v("firstname: "+e._s(e.userInfo.firstname))]),s("li",[e._v("lastname: "+e._s(e.userInfo.lastname))]),s("li",[e._v("Create Date: "+e._s(e.userInfo.createDate))])]),s("div",{attrs:{id:"ops"}},[s("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"submit",name:"action"},on:{click:function(t){return e.deleteUser()}}},[e._v("Delete Account ")]),s("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"submit",name:"action"},on:{click:function(t){return e.editUser()}}},[e._v("Edit ")])])]):s("div",[s("div",{staticClass:"row"},[s("form",{staticClass:"col s12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.editUserInfo.firstname,expression:"editUserInfo.firstname"}],staticClass:"validate",attrs:{id:"reg_firstname",type:"text"},domProps:{value:e.userInfo.firstname,value:e.editUserInfo.firstname},on:{input:function(t){t.target.composing||e.$set(e.editUserInfo,"firstname",t.target.value)}}}),s("label",{staticClass:"active",attrs:{for:"reg_firstname"}},[e._v("Firstname")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.editUserInfo.lastname,expression:"editUserInfo.lastname"}],staticClass:"validate",attrs:{id:"reg_lastname",type:"text"},domProps:{value:e.userInfo.lastname,value:e.editUserInfo.lastname},on:{input:function(t){t.target.composing||e.$set(e.editUserInfo,"lastname",t.target.value)}}}),s("label",{staticClass:"active",attrs:{for:"reg_lastname"}},[e._v("Lastname")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.editUserInfo.password,expression:"editUserInfo.password"}],staticClass:"validate",attrs:{id:"reg_password",type:"password"},domProps:{value:e.editUserInfo.password},on:{input:function(t){t.target.composing||e.$set(e.editUserInfo,"password",t.target.value)}}}),s("label",{attrs:{for:"reg_password"}},[e._v("Password")])])]),s("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"submit",name:"action"},on:{click:function(t){return e.editUserBack()}}},[e._v("Back ")]),s("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"submit",name:"action"},on:{click:function(t){return e.editUserSubmit()}}},[e._v("Submit ")])])])])])]):e._e()],1)},M=[],$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"msgForm"},[s("div",{ref:"messageBox",staticClass:"messages"},e._l(e.messages,(function(t){return s("div",{key:t.messageId},[e.checkUser(t.username)?s("div",[s("MessageTo",{staticClass:"msgBOX",attrs:{msg:t.text,author:t.username,msgId:t.id,date:t.createdDate}})],1):s("div",[s("MessageFrom",{staticClass:"msgBOX",attrs:{msg:t.text,username:t.username,date:t.createdDate}})],1)])})),0),s("MessageSend")],1)},E=[],U=(s("159b"),s("ac1f"),s("5319"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"MessageFrom",on:{mouseover:function(t){e.showDate=!0},mouseleave:function(t){e.showDate=!1}}},[s("p",{staticClass:"username"},[e._v(e._s(e.username))]),s("span",{staticClass:"text"},[e._v(e._s(e.msg))]),e.showDate?s("span",{staticClass:"date"},[e._v(e._s(e.date))]):e._e()])}),P=[],j={name:"MessageFrom",props:["msg","username","date"],data:function(){return{showDate:!1}}},O=j,D=(s("32c6"),Object(g["a"])(O,U,P,!1,null,"436a93ff",null)),S=D.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"msgBOX",staticClass:"MessageTo",on:{contextmenu:function(t){return t.preventDefault(),e.$refs.menu.open(t)},mouseover:function(t){e.showDate=!0},mouseleave:function(t){e.showDate=!1}}},[s("p",{staticClass:"username"},[e._v(e._s(e.author))]),s("span",{staticClass:"text"},[e._v(e._s(e.msg))]),e.showDate?s("span",{staticClass:"date"},[e._v(e._s(e.date))]):e._e(),s("vue-context",{ref:"menu"},[s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onClick(t.target.innerText)}}},[e._v("Edit")])]),s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onClick(t.target.innerText)}}},[e._v("Delete")])])])],1)},q=[],L=(s("25f0"),s("899b")),B=s("1157"),N={name:"MessageTo",props:["msg","author","date","msgId"],data:function(){return{showDate:!1}},components:{VueContext:L["a"]},methods:{editMsg:function(){var e=prompt("Enter new text: ");r.a.put(this.$store.state.request_url+"message/"+this.msgId,{text:e.toString()})},onClick:function(e){"Edit"===e&&this.editMsg(),"Delete"==e&&this.deleteMsg()},deleteMsg:function(){r.a.delete(this.$store.state.request_url+"message/"+this.msgId)},fixMargin:function(){var e=this.$refs.msgBOX.clientWidth;this.$refs.msgBOX.style.marginLeft="calc(100% - "+e+"px - 50px)"}},computed:{},mounted:function(){B(".MessageTo").on("mouseleave",(function(){B("body").trigger("click")})),m.a.AutoInit(void 0),this.fixMargin()}},A=N,X=(s("55c6"),Object(g["a"])(A,T,q,!1,null,"1501f9b8",null)),V=X.exports,H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"MessageSend"},[s("div",{staticClass:"row"},[s("form",{staticClass:"col s12",attrs:{id:"msgSEND"},on:{submit:function(t){return t.preventDefault(),e.noop(t)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s6"},[s("i",{staticClass:"material-icons prefix textInputTrigger"},[e._v("mode_edit")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"materialize-textarea",attrs:{type:"text",id:"icon_prefix2"},domProps:{value:e.value},on:{keyup:e.sendMsgOnKey,input:function(t){t.target.composing||(e.value=t.target.value)}}}),s("label",{staticClass:"textInputTrigger",attrs:{for:"icon_prefix2"}},[e._v("Text")])]),s("button",{attrs:{id:"emojiSelector"},on:{mouseenter:e.showEmoji}},[e._v("😃")]),s("VEmojiPicker",{on:{select:e.selectEmoji}})],1)])])])},J=[],K=s("79b5"),R=s("1157"),z={name:"MessageSend",data:function(){return{value:"",input:"",search:""}},components:{VEmojiPicker:K["a"]},methods:{getValue:function(){console.log(this.value+" "+this.user)},selectEmoji:function(e){console.log(e),this.value+=e.data,R(".textInputTrigger").addClass("active")},sendMsg:function(){var e=this;""!==e.value&&(r()({method:"post",url:this.$store.state.request_url+"message",data:{text:e.value}}).then((function(e){})),e.value="")},showEmoji:function(){R("#EmojiPicker").css("visibility","visible")},sendMsgOnKey:function(e){13===e.keyCode&&this.sendMsg(),this.log+=e.key},noop:function(){}},mounted:function(){m.a.AutoInit(void 0),R("#EmojiPicker").on("mouseleave",(function(){R("#EmojiPicker").css("visibility","hidden")}))}},W=z,G=(s("4585"),Object(g["a"])(W,H,J,!1,null,null,null)),Q=G.exports,Y=s("1157"),Z={name:"MessengerForm",components:{MessageSend:Q,MessageTo:V,MessageFrom:S},data:function(){return{messages:[],msgId:0,myMsg:"",value:"",state:!0}},props:{user:null},comments:[S,V],methods:{checkState:function(){var e=this;r.a.get(this.$store.state.request_url+"message/check").then((function(t){e.state=t.data}))},initial:function(){r.a.get(this.$store.state.request_url+"message/initial")},getMsg:function(){if(this.state){var e=this;e.messages=[],r.a.get(this.$store.state.request_url+"message").then((function(t){var s=t.data;s&&s.forEach((function(t){var s={text:t.text,userId:t.user_id,createdDate:t.create_date,id:t.message_id,username:t.username},a=s.createdDate,n=a.indexOf(".");a=a.substring(0,-1!=n?n:a.length).replace("T"," "),s.createdDate=a,e.messages.push(s)}))})).catch((function(e){console.log(e)}))}},checkUser:function(e){return e===this.user}},created:function(){var e=this;this.checkUser("dito"),e.initial(),setInterval((function(){e.checkState(),e.getMsg()}),500),Y(".messages").animate({scrollTop:1e4*Y(document).height()},100)}},ee=Z,te=(s("834e"),Object(g["a"])(ee,$,E,!1,null,null,null)),se=te.exports,ae=s("1157"),ne={name:"Chat",components:{MessengerForm:se},data:function(){return{userInfo:{userId:"",username:"",firstname:"1111",lastname:"",createDate:""},editUserInfo:{firstname:"",lastname:"",password:""},userInfoShow:!1,userInfoShow1:!0}},methods:{getUserInfo:function(){var e=this;r.a.get(this.$store.state.request_url+"user").then((function(t){e.userInfo.userId=t.data.userId,e.userInfo.username=t.data.username,e.userInfo.firstname=t.data.firstname,e.userInfo.lastname=t.data.lastname;var s=t.data.createDate,a=s.indexOf(" ");s=s.substring(0,-1!=a?a:s.length),e.userInfo.createDate=s}))},logout:function(){r.a.post(this.$store.state.request_url+"user/logout")},deleteUser:function(){var e=prompt("Are you sure? y/n");"y"===e&&r.a.delete(this.$store.state.request_url+"user")},editUser:function(){this.userInfoShow1=!1,ae("#user-info").height(350).css("top","calc(40% - 125px)")},editUserBack:function(){this.userInfoShow1=!0,ae("#user-info").height(200).css("top","calc(40% - 100px)")},editUserSubmit:function(){var e=this;r.a.put(this.$store.state.request_url+"user",{firstname:e.editUserInfo.firstname,lastname:e.editUserInfo.lastname,password:e.editUserInfo.password})}},created:function(){this.getUserInfo()}},re=ne,ie=(s("175d"),Object(g["a"])(re,F,M,!1,null,"41fc8d9a",null)),oe=ie.exports,ue=s("1157"),ce={name:"Home",components:{Chat:oe,Login:k},data:function(){return{islogged:!1,pageLoaded:!1}},methods:{checkLogged:function(){var e=this;r.a.get(this.$store.state.request_url+"user/is-logged").then((function(t){e.islogged=t.data})).catch((function(e){console.log(e)})).then((function(){}))}},mounted:function(){var e=this;e.checkLogged(),ue(document).ready((function(){e.pageLoaded=!0}))}},le=ce,me=(s("3f31"),Object(g["a"])(le,w,_,!1,null,"c882f9a0",null)),de=me.exports;a["a"].use(h["a"]);var fe=[{path:"/",name:"Home",component:de},{path:"/login",name:"Login",component:k},{path:"/chat",name:"Chat",component:oe}],ge=new h["a"]({mode:"history",base:"/",routes:fe}),ve=ge,pe=s("2f62");a["a"].use(pe["a"]);var he=new pe["a"].Store({state:{request_url:"/",value:""},mutations:{},actions:{},modules:{}}),we=s("1157"),_e=s.n(we);s("8266"),s("619b");a["a"].config.productionTip=!1,new a["a"]({router:ve,store:he,axios:r.a,$:_e.a,render:function(e){return e(p)}}).$mount("#app")},6647:function(e,t,s){},"6f2a":function(e,t,s){},"834e":function(e,t,s){"use strict";s("6647")},"85ec":function(e,t,s){},b166:function(e,t,s){},ddf8:function(e,t,s){}});
//# sourceMappingURL=app.2b7febd4.js.map